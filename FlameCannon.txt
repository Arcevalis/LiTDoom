
ACTOR FlameCannon : BrutalWeapon
{
	Height 20
	Weapon.SelectionOrder 5550
	Weapon.AmmoUse 0
	Weapon.AmmoGive 0
	Weapon.AmmoType1 "GASAMMO"
	Weapon.AmmoType2 "FUELTANKAMMO"	  
    Inventory.PickupSound "BFGREADY"
     +WEAPON.NOAUTOAIM
	Inventory.PickupMessage "$GOTMANCUBUSARM"
	States
	{
	
	Ready:
	SelectAnimation:
	FLMR CBA 1
	
	Ready3:
		FLMG A 1 A_WeaponReadyLit
		FLMG A 0 A_JumpIfInventory("GoFatality", 1, "Steady")
        FLMG A 0 A_JumpIfInventory("Kicking",1,"dokickflamecannon")
		Goto Ready3
		
	CheckSprint:
		//FLMG A 1 A_WeaponReady(WRF_NOFIRE)
		FLMG A 0 A_JumpIfInventory("IsStandingStill", 1, "Ready3")
		FLMG A 0 A_JumpIfInventory("IsTacticalClass", 1, "StartSprint")
		Goto Ready3
		
	StartSprint:
		TNT1 A 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_FORWARD, 1)
		GOTO READY3
		FLMG A 1 A_WeaponReady(WRF_NOFIRE)
		FLMG A 0 A_Takeinventory("Zoomed",1)
		FLMG A 0 A_Takeinventory("ADSmode",1)
		FLMG A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_JumpIfInventory("LARGESTAMINA", 1, 2)
		TNT1 A 0 A_JumpIfInventory("UsedStamina", 70, "Trip")
		TNT1 A 0 A_JumpIfInventory("UsedStamina", 1400, "Trip")
		
	Sprinting:	
		FLMG A 0 offset(-9,32) 
		FLMG A 0 offset(-9,32) A_JumpIfInventory("IsStandingStill", 1, "Ready3")
		TNT1 A 0 A_JumpIfInventory("LARGESTAMINA", 1, 2)
		TNT1 A 0 A_JumpIfInventory("UsedStamina", 100, "StopSprintTired")
		TNT1 A 0 A_JumpIfInventory("UsedStamina", 2000, "StopSprintTired")
		TNT1 A 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_FORWARD, 1)
		GOTO StopSprint
		PLAY A 0 offset(-9,32) ACS_ExecuteAlways(852, 0, 0, 0, 0)//Makes player faster.
		FLMG A 0 offset(-9,32) A_JumpIfInventory("Powerstrength2", 1, 2)
		FLMG A 0 offset(-9,32) A_GiveInventory("UsedStamina", 15)
		FLMG A 0 offset(-9,32)
		FLMG A 1 offset(-9,34) A_SetPitch(pitch -0.5)
		FLMG A 1 offset(-6,36) A_SetPitch(pitch -0.5)
		FLMG A 1 offset(-3,38) A_SetPitch(pitch -0.5)
		FLMG A 1 offset(0,38) A_SetPitch(pitch -0.5)
		FLMG A 1 offset(3,36) A_SetPitch(pitch -0.5)
		FLMG A 1 offset(6,34) A_SetPitch(pitch -0.5)
		FLMG A 1 offset(9,32) A_SetPitch(pitch -0.5)
		FLMG A 0 offset(9,32) A_WeaponReady(WRF_NOBOB)
		FLMG A 0 A_JumpIfInventory("Kicking",1,"dokickflamecannon")
        FLMG A 0 A_JumpIfInventory("Taunting",1,"Taunt")
        FLMG A 0 
		FLMG A 0 offset(-9,32) A_GiveInventory("UsedStamina", 8)
		FLMG A 0 offset(9,33) A_SpawnItemEx("FootStep", 0, 0, 2, 0, 0, -4)
		FLMG A 1 offset(9,34) A_SetPitch(pitch +0.5)
		FLMG A 1 offset(6,36) A_SetPitch(pitch +0.5)
		FLMG A 1 offset(3,38) A_SetPitch(pitch +0.5)
		FLMG A 1 offset(0,38) A_SetPitch(pitch +0.5)
		FLMG A 1 offset(-3,36) A_SetPitch(pitch +0.5)
		FLMG A 1 offset(-6,34) A_SetPitch(pitch +0.5)
		FLMG A 1 offset(-9,32) A_SetPitch(pitch +0.5)
		FLMG A 0 offset(-9,32) A_WeaponReady(WRF_NOBOB)
		FLMG A 0 offset(-9,32) A_JumpIfInventory("IsRunning", 1, "Sprinting")
		Goto StopSprint
		
	StopSprintTired:
		FLMG A 1
		PLAY A 0 ACS_ExecuteAlways(853, 0, 0, 0, 0)//Makes player slower.
		FLMG A 0 A_PlaySound("Tired", 2)
		FLMG A 0 A_TakeInventory("usedstamina", 1)
		TNT1 A 0 A_Jumpifhealthlower(25,"rupturesprint")												  
		FLMG A 5 A_WeaponReady
		FLMG A 0 A_TakeInventory("usedstamina", 1)
		FLMG A 5 A_WeaponReady
		FLMG A 0 A_TakeInventory("usedstamina", 1)
		FLMG A 5 A_WeaponReady
		FLMG A 0 A_TakeInventory("usedstamina", 1)
		FLMG A 5 A_WeaponReady
		FLMG A 0 A_TakeInventory("usedstamina", 1)
		FLMG A 5 A_WeaponReady
		Goto Ready3
	StopSprint:
		FLMG A 1
		TNT1 A 0 A_JumpIfInventory("LARGESTAMINA", 1, 2)
		TNT1 A 0 A_JumpIfInventory("UsedStamina", 70, "StopSprintTired")
		TNT1 A 0 A_JumpIfInventory("UsedStamina", 1400, "StopSprintTired")
		PLAY A 0 ACS_ExecuteAlways(853, 0, 0, 0, 0)//Makes player slower.
		Goto Ready3
		
	
	Refill:
		FLMR ABC 10
		FLMR C 15
		FLMR C 5 A_Stopsoundex("item")
		FLMR CBA 10
		Goto Ready3
	
	WeaponCheckOverlay:
		TNT1 A 5
		PISA D 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_USER4, 1)
		Stop
	WeaponCheck2:
		TNT1 A 1
		PISA D 0 ACS_NamedExecutealways("napalmdurabilitycheck", 0)
		PISA D 0 ACS_NamedExecutealways("flamermagcheck", 0)
		PISA D 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_USER4, "WeaponCheck2")
		stop	
	NoAmmoUnload:
	    PISA D 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_USER4, 1)
		goto Dryfire
		TNT1 A 0 A_Overlay(98,"WeaponCheckOverlay",false)
	DryFire:
		TNT1 A 0 A_PlaySound("weapons/empty")
	Dryfire2:
	    FLMG A 10 
		PISA D 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_USER4, "Dryfire2")
		Goto Ready3+6
	
	Deselect:
		TNT1 A 0 A_TakeInventory("flamecannonselected", 1)
	    FLMG A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_TakeInventory("throwtoken", 1)
		TNT1 A 0 A_TakeInventory("slashtoken", 1)
		FLMG A 0 A_TakeInventory("Flaretoken", 1)
		FLMG A 0 A_TakeInventory("TossGrenade", 1)
	TNT1 A 0 A_JumpIfInventory("weaponbroke", 1, "Deselectcontinue")
		FLMR ABC 1 A_Lower
	Deselect2:
		FLMR C 1 A_Lower
		Loop
	deselectcontinue:
		TNT1 A 1 A_LOWER
		LOOP
	
		
	goingtoaction:
	    FLMG A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_TakeInventory("throwtoken", 1)
		TNT1 A 0 A_TakeInventory("slashtoken", 1)
		FLMG A 0 A_TakeInventory("Flaretoken", 1)
		FLMG A 0 A_TakeInventory("TossGrenade", 1)
		FLMR ABC 1
		TNT1 A 0 A_JumpIfInventory("weargasmask", 1, "wearanimation")
		TNT1 A 0 A_JumpIfInventory("removegasmask", 1, "removeanimation")
		TNT1 A 0 A_JumpIfInventory("battledrugtoken",1,"drugshot")
		TNT1 A 0 A_JumpIfInventory("BANDAGETOKEN",1,"BANDAGE")
		goto repair
		
	Select: 
		TNT1 A 0  A_Overlay(-10,"FirstPersonLegsStand")
		TNT1 A 0 a_removelight(1)
		TNT1 A 0 A_removelight(2)	
		TNT1 A 0 SetPlayerProperty(0,0,2)
		TNT1 A 0 A_SetRoll(0)
		TNT1 A 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("FlamecannonCrosshair"));}else{A_SetCrosshair(0);}}	
		TNT1 A 0 ACS_NAMEDEXECUTE("WEAPONSELECT",0)
		FLMG A 0 A_Giveinventory("GoSpecial",1)
		TNT1 A 0 A_TakeInventory("throwtoken", 1)
		TNT1 A 0 A_TakeInventory("slashtoken", 1)
		FLMG A 0 A_TakeInventory("Flaretoken", 1)
		FLMG A 0 A_TakeInventory("TossGrenade", 1)
		FLMR CC 1 A_Raise
		FLMT A 0 A_PlaySound("FLAMERUP")
        TNT1 AAA 0
	Select2:
		TNT1 AAAAAAAAA 0 A_Raise
		loop
		
    Spawn:
        MANA H 1
        Loop
		
	 Fire:
        FLMG A 0
		FLMG A 0 A_JumpIf(waterlevel > 1, "DryFire")
        FLMG A 0 A_JumpIfInventory("FUELTANKAMMO", 1, "Fireball")
		FLMG A 0 A_StopSound(CHAN_WEAPON)
		Goto DryFire
	
	AltFire:
	    FLMG A 0
		FLMG A 0 A_JumpIf(waterlevel > 1, "DryFire")
        FLMG A 0 A_JumpIfInventory("FUELTANKAMMO", 5, "Flamethrower")
		FLMG A 0 A_StopSound(CHAN_WEAPON)
		Goto DryFire
		
	Fireball:	
		//DURABILITY CHECK
		TNT1 A 0 A_JumpIFInventory("FirearmsdurabilityOFF", 1, 4)
		PIST F 0 A_Takeinventory("NapalmDurability",1)
		PIST F 0 A_JumpIfInventory("NapalmDurability",30, 2)
		PIST F 0 A_Jump(90, "Misfire")
		///
	
        FLMF A 1 BRIGHT A_FireCustomMissile("BigFireBallWithGravity", 0, 1, 0, -6)
		FLMG A 0 A_SetPitch(-4.0 + pitch)
		FLMG A 0 A_TakeInventory("FUELTANKAMMO", 1)
		TNT1 AAAAAAAAAAA 0 BRIGHT A_FireCustomMissile("Shotgunparticles2", random(-12,12), 0, 0, -2, 0, random(-9,9))
		FLMG A 0 A_FireCustomMissile("ShakeYourAssDouble", 0, 0, 0, 0)
        FLMF BC 1 BRIGHT 
        FLMF CD 1 A_SetPitch(+2.0 + pitch)
		
		/// DURABILITY CHECK 2
		PIST F 0 A_JumpIfInventory("napalmdurability", 1, 1)
		goto weaponbreak
		TNT1 A 0
		///
		
		FLMG A 5
		Goto Ready3+2
	
 
		
	Flamethrower:
		//DURABILITY CHECK
		TNT1 A 0 A_JumpIFInventory("FirearmsdurabilityOFF", 1, 4)
		PIST F 0 A_Takeinventory("NapalmDurability",1)
		PIST F 0 A_JumpIfInventory("NapalmDurability",30, 2)
		PIST F 0 A_Jump(50, "Misfire")
		///
	
        FLMG A 0 BRIGHT A_FireCustomMissile("FlamethrowerMissile", 0, 1, 0, -12, 0, 8)
		TNT1 AAA 0 BRIGHT A_FireCustomMissile("Shotgunparticles2", random(-12,12), 0, 0, -2, 0, random(-9,9))
		FLMG A 0 A_PlaySound("FLAMER", CHAN_WEAPON, 1, 1)
		
		FLMG A 0 A_TakeInventory("FUELTANKAMMO", 2)
		FLMF FG 1 BRIGHT A_SetAngle(random(1, -1) + angle)
		FLMG A 0 BRIGHT A_SetPitch(random(1, -1) + pitch)
		
		//DURABILITY CHECK
		TNT1 A 0 A_JumpIFInventory("FirearmsdurabilityOFF", 1, 4)
		PIST F 0 A_Takeinventory("NapalmDurability",1)
		PIST F 0 A_JumpIfInventory("NapalmDurability",30, 2)
		PIST F 0 A_Jump(50, "Misfire")
		///
		
		/// DURABILITY CHECK 2
		PIST F 0 A_JumpIfInventory("napalmdurability", 1, 1)
		goto weaponbreak
		TNT1 A 0
		
		FLMG A 0 BRIGHT A_FireCustomMissile("FlamethrowerMissileNoLight", 0, 1, 0, -12, 0, 8)
		TNT1 AAA 0 BRIGHT A_FireCustomMissile("Shotgunparticles2", random(-12,12), 0, 0, -2, 0, random(-9,9))
		FLMG A 0 A_PlaySound("FLAMER", CHAN_WEAPON, 1, 1)
		FLMG A 0 A_TakeInventory("FUELTANKAMMO", 1)
		FLMF FG 1 BRIGHT
		
		//DURABILITY CHECK
		TNT1 A 0 A_JumpIFInventory("FirearmsdurabilityOFF", 1, 4)
		PIST F 0 A_Takeinventory("NapalmDurability",1)
		PIST F 0 A_JumpIfInventory("NapalmDurability",30, 2)
		PIST F 0 A_Jump(50, "Misfire")
		///
		
		/// DURABILITY CHECK 2
		PIST F 0 A_JumpIfInventory("napalmdurability", 1, 1)
		goto weaponbreak
		TNT1 A 0
		
		FLMG A 0 BRIGHT A_FireCustomMissile("FlamethrowerMissileNoLight", 0, 1, 0, -12, 0, 8)
		FLMG A 0 BRIGHT A_FireCustomMissile("Shotgunparticles2", random(-12,12), 0, 0, -2, 0, random(-9,9))
		FLMG A 0 A_PlaySound("FLAMER", CHAN_WEAPON, 1, 1)
		FLMG A 0 A_TakeInventory("FUELTANKAMMO", 1)
		FLMF FG 1 BRIGHT
		
		//DURABILITY CHECK
		TNT1 A 0 A_JumpIFInventory("FirearmsdurabilityOFF", 1, 4)
		PIST F 0 A_Takeinventory("NapalmDurability",2)
		PIST F 0 A_JumpIfInventory("NapalmDurability",30, 2)
		PIST F 0 A_Jump(50, "Misfire")
		///
		
		/// DURABILITY CHECK 2
		PIST F 0 A_JumpIfInventory("napalmdurability", 1, 1)
		goto weaponbreak
		TNT1 A 0
		
		FLMG A 0 BRIGHT A_FireCustomMissile("FlamethrowerMissileNoLight", 0, 1, 0, -12, 0, 8)
		FLMG A 0 BRIGHT A_FireCustomMissile("Shotgunparticles2", random(-12,12), 0, 0, -2, 0, random(-9,9))
		FLMG A 0 A_PlaySound("FLAMER", CHAN_WEAPON, 1, 1)
		FLMG A 0 A_TakeInventory("FUELTANKAMMO", 1)
		FLMF FG 1 BRIGHT
		FLMG A 0 A_PlaySound("FLAMSTOP", CHAN_WEAPON)
		
		/// DURABILITY CHECK 2
		PIST F 0 A_JumpIfInventory("napalmdurability", 1, 1)
		goto weaponbreak
		TNT1 A 0
		FLMG A 14
		Goto Ready3+6
		
		Misfire:
		TNT1 A 0 A_jump(127,"GasLeak")
		TNT1 A 0 A_playsound("DRYFIRE", CHAN_WEAPON)
		goto Ready3
		
		GasLeak:
		FLMR ABC 1
		TNT1 A 0 A_playsound("LEAK1",1)
		FLMR C 20 A_SPAWNITEM("FUELPOOL",0,0)
		TNT1 A 0 A_TAKEINVENTORY("FUELTANKAMMO",5)
		TNT1 A 0 A_JUMPIFINVENTORY("FUELTANKAMMO",2,1)
		GOTO Gasleakend
		
		FLMR C 20 A_SPAWNITEM("FUELPOOL",0,0)
		TNT1 A 0 A_TAKEINVENTORY("FUELTANKAMMO",5)
		TNT1 A 0 A_JUMPIFINVENTORY("FUELTANKAMMO",2,1)
		GOTO Gasleakend
		
		FLMR C 20 A_SPAWNITEM("FUELPOOL",0,0)
		TNT1 A 0 A_TAKEINVENTORY("FUELTANKAMMO",5)
		
		GasLeakEnd:
		TNT1 A 0 A_STOPSOUND(1)
		FLMR CBA 1
		goto Ready3
		
		Weaponbreak:
		TNT1 A 0 A_STOPSOUND(CHAN_WEAPON)
		TNT1 A 0 a_print("your Napalm Launcher has broken!")
		TNT1 A 0 ACS_namedexecute("BROKENDISARM",0)
		TNT1 AAA 1 a_weaponready
		Wait
		
//////////////////
//RELOAD
/////////////////

		Reload:
		TNT1 A 0 A_Takeinventory("Reloading",1)
		TNT1 A 0 A_Takeinventory("ADSmode",1)
		PIST F 0 A_JumpIfInventory("REPAIRMODE",1,"KITREPAIR")
		
		TNT1 A 0 A_JumpIfInventory("FUELTANKAMMO",100,"ready3")
        TNT1 A 0 A_JumpIfInventory("GASAMMO",1,3)
        Goto DRYFIRE
        TNT1 AAA 0
		TNT1 A 0 A_Takeinventory("Zoomed",1)
        TNT1 A 0 A_ZoomFactor(1.0)
		SHTN A 0 a_OVERLAY(3,"Fueltankopen")
		TNT1 A 0 SetPlayerProperty(0,1,4)
		FLMR ABC 1
		FLMR C 46
		SHTN A 0 a_OVERLAY(3,"RefuelAnimation", false)
		SHTN A 0 Acs_NAMEDEXECUTE("CROUCH",0)
		
		REFUELING:	
		SHTN A 0 A_JumpIfInventory("GASAMMO",1,2)
        Goto FINISHRELOAD
		SHTN A 0
		AXEG A 0 A_PlaySound("GASREFIL", 6,1.0,1)
		SSHR A 0 A_TakeInventory("Reloading", 1)
        SHTN A 0 A_JumpIfInventory("FUELTANKAMMO",100,"FINISHreload")
        SHTN A 0 A_Giveinventory("FUELTANKammo",1)
		SHTN A 0 A_Takeinventory("GASAmmo",1)
		FLMG A 0 A_JumpIfInventory("Kicking",1,"finishreload")
		FLMR C 1 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_ATTACK, "finishreload")
		FLMR C 2 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_ALTATTACK, "finishreload")
		SHTN A 0 
		goto refueling
		 
	FUELTANKOPEN:
		AXEG A 0 A_PlaySound("plugopen", 1)
		FUEL ABCDEFG 1
		FUEL HIJKLMNOHIJKLMNOHIJKLMNO 1
		FUEL PQRSTTTTTTU 1 
		FUEL VWXYZZZ 1 a_SETPITCH(PITCH+3)
		stop
	
	REFUELANIMATION:	
		FU3L A 5 a_SETPITCH(PITCH-3)
        FU3L BC 2 a_SETPITCH(PITCH+1.5)
		TNT1 A 0 A_JumpIfInventory("FUELTANKAMMO",100,3)
		TNT1 A 0 A_JumpIfInventory("GASAMMO",1,1)
		stop
		TNT1 A 0 a_OVERLAY(3,"RefuelAnimation", false)
		stop
		TNT1 A 0 
		stop
		
	FUELTANKAWAY:
		AXEG A 0 A_PlaySound("plugclos", 1)
		FU3L B 1
		FUEL ZYXWVUTSRQPONMMLLKKKKJI 1
		TNT1 A 0 A_STOPSOUND(1)
		FUEL HPQRST 1  a_SETPITCH(PITCH-3)
		stop
		
	FINISHRELOAD:
	TNT1 A 0 A_STOPSOUND(6)
	SHTN A 0 a_OVERLAY(3,"FuelTankAway", false)
	FLMR C 7
	FLMR C 17
	SHTN A 0 Acs_NAMEDEXECUTE("GETUP",0)
	FLMR C 13
	FLMR BA 1
	PIST F 0 A_JumpIfInventory("choosingreward",1,2)
	TNT1 A 0 SetPlayerProperty(0,0,4)
	PIST F 0
	goto Ready3
//////////////////	
	
//////////////////
//UNLOAD
/////////////////	

DropFuel:
	PDAM M 0 a_takeinventory("gasammo",20)
	PDAM M 0  A_SpawnItemEx("gasammo", random(51, 55), random(-4, 4), 40, 2, 0, 2, angle, SXF_ABSOLUTEANGLE)
	goto Unload2

CheckTank:
	TNT1 A 5
	TNT1 A 0 A_JumpIFInventory("FirearmsdurabilityOFF", 1, 2)
	TNT1 A 0 ACS_NAMEDEXECUTEalways("napalmDURABILITYCHECK",0)
	TNT1 A 0 ACS_NamedExecutealways("FLAMERMagCheck",0)
	TNT1 A 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_USER4, "CheckTANK")
	
	FLMT A 0 A_PlaySound("FLAMERUP")
	FLMR CCBA 1
	goto Ready3

user4:		
		PIST F 0 A_Takeinventory("ADSmode",1)
		FLMG A 5
		PIST F 0 A_JumpIfInventory("Fueltankammo",1,1)
        Goto NoammoUnload
	
        TNT1 A 0
		PIST F 0 A_Takeinventory("Zoomed",1)
        BADF A 0 A_ZoomFactor(1.0)
		TNT1 A 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("FlamecannonCrosshair"));}else{A_SetCrosshair(0);}}		
		PIST F 0 A_Takeinventory("Reloading",1)
		FLMR ABCC 1
		TNT1 A 5
		TNT1 A 0 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_USER4, "CheckTank")
		
		PIST F 0 A_JumpIfInventory("hasbackpack",1,3)
		PIST F 0 A_JumpIfinventory("GASAMMO",40,"DropFuel")
		PIST F 0 A_Jump(256,2)
		PIST F 0 A_JumpIfInventory("GASAMMO",60,"Dropfuel")
		
	Unload2:	
		SHTN A 0 Acs_NAMEDEXECUTE("CROUCH",0)
		TNT1 A 0 SetPlayerProperty(0,1,4)	
		AXEG A 0 A_PlaySound("plugopen", 1)
		FUEL ABCDEFG 1
		FUEL HIJKLMNOHIJKLMNOHIJKLMNO 1
		FUEL PQRSTTTTTT 1 a_SETPITCH(PITCH+2.5)
			
	RefillTank:
		TNT1 AAAA 0
		AXEG A 0 A_PlaySound("GASREFIL", 6,1.0,1)
		PIST F 0 A_JumpIfInventory("hasbackpack",1,3)
		PIST F 0 A_JumpIfinventory("GASAMMO",40,"FinishUnload")
		PIST F 0 A_Jump(256,2)
		PIST F 0 A_JumpIfInventory("GASAMMO",60,"FinishUnload")
		
		
		PIST F 0 A_JumpIfInventory("FUELTANKAMMO",1,1)
		Goto FinishUnload
		
		FLMG A 0 A_JumpIfInventory("Kicking",1,"FinishUnload")
		TNT1 C 1 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_ATTACK, "FinishUnload")
		TNT1 C 1 A_JumpIf(GetPlayerInput(INPUT_BUTTONS) & BT_ALTATTACK, "FinishUnload")
		
		PIST F 0 A_Takeinventory("FUELTANKAMMO",1)
		PIST F 0 A_Giveinventory("GASAMMO",1)
		Goto Refilltank
		
	FinishUnload:
		TNT1 A 0 A_STOPSOUND(6)
		AXEG A 0 A_PlaySound("plugclos", 1)
		FUEL SRQPONMMLLKKKKJI 1
		TNT1 A 0 A_STOPSOUND(1)
		SHTN A 0 Acs_NAMEDEXECUTE("GETUP",0)
		FUEL HPQRSTTTT 1  a_SETPITCH(PITCH-3)
		
		PIST F 0 A_JumpIfInventory("choosingreward",1,2)
		TNT1 A 0 SetPlayerProperty(0,0,4)
		TNT1 A 0
        Goto SelectAnimation
		
	
	KITREPAIR:
		TNT1 A 0 A_JumpIFInventory("survivalkituses",1, 2)
		PIST F 0 A_Jump(256,"kitbroke")
		FLMG A 5
		
		TNT1 A 0 A_JumpIFInventory("napalmDurability",100, "NoNeedRepair")
		PIST F 0 A_JumpIfInventory("scrapmetal",1, 2)
		PIST F 0 A_Jump(256,"outofmetal")
		
	KITREPAIR2:
		PIST F 0 A_GIVEinventory("napalmDurability",30)
		BADF A 0 A_Takeinventory("survivalkituses",1)
		BADF A 0 A_Takeinventory("scrapmetal",1)
		TNT1 A 0 A_playsound("WIRECUT",1)
		FLMR CBA 1
		TNT1 A 35
		FLMR ABC 1
		
		TNT1 A 0 A_JumpIFInventory("survivalkituses",1, 2)
		PIST F 0 A_Jump(256,"kitbroke")
		FLMG A 2
		goto Ready3			
		
	Dokickflamecannon:
		TNT1 A 0 A_JumpIfInventory("isdoomguy", 1, 4)
		TNT1 A 0 A_JumpIfInventory("LARGESTAMINA", 1, 2)
		TNT1 A 0 A_JumpifInventory("UsedStamina",95,4)
		TNT1 A 0 A_JumpifInventory("UsedStamina",1995,3)
		TNT1 A 0 A_overlay(3,"kickflamecannon")
		TNT1 A 0 a_Jump(256,"Dokick")
		goto Ready3
		TNT1 A 0 A_overlay(3,"kickflamecannontired")
		TNT1 A 0 a_Jump(256,"Dokick")
		goto Ready3	
	kickflamecannon:
		FLMR AAB 1
		FLMR C 12 
		FLMR BAA 1 
		TNT1 A 0 A_JumpIfInventory("isSliding", 1, 2)
		TNT1 A 0 A_JumpIfInventory("AIRKICKING", 1, 2)
		stop
		FLMR A 10
		STOP
		FLMR ABC 1
		TNT1 A 7
		STOP
	kickflamecannontired:
		FLMR AAB 2
		FLMR C 37 
		FLMR BAA 2
		STOP	
	
	}
}

ACTOR BigFireBallWithGravity: BigFireBall
{
Damage (random (100, 100))
Gravity 0.2
+NOGRAVITY
Speed 50
Damagetype "Fire"
States
{
	Death:
	FLMG A 0
    FLMG A 0 A_Explode (60, 150)
	Goto ExplosionEffect
}
}






ACTOR Flames
{
	Radius 6
	Height 8
	Speed 30
	Damage 1
	Projectile 
	+RANDOMIZE
	+FORCEXYBILLBOARD
    +RIPPER
    +BLOODLESSIMPACT 
	RenderStyle Add
    DamageType Flames
    Scale 2.0
	Alpha 1
	SeeSound "fatso/attack"
	DeathSound "fatso/shotx"
    Decal "BigScorch"
	States
	{
    Spawn:
        TNT1 C 6
        Goto See
	See:
        FLMG A 0 A_Explode (15, 40)
        FRFX C 2 BRIGHT A_SpawnItem("RedFlareMedium",0,0)
        FLMG A 0 A_Explode (15, 40)
        FRFX C 2 BRIGHT A_SpawnItem("RedFlareMedium",0,0)
        FLMG A 0 A_Explode (15, 40)
	    EXPL AA 0 A_CustomMissile ("ExplosionSmoke", 32, 0, random (0, 360), 2, random (0, 360))
        FLMG A 0 A_Explode (15, 40)
        FRFX FGHIJKLMNOPG 2 BRIGHT A_SpawnItem("RedFlareMedium",0,0)
		Goto Death
	Death:
	    EXPL AA 0 A_CustomMissile ("ExplosionSmoke", 32, 0, random (0, 360), 2, random (0, 360))
	    FLMG A 0 A_SpawnItem("RedFlareMedium",0,0)
		Stop
	}
}