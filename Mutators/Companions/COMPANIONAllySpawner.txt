ACTOR SentryBotTeleportBeacon : CustomInventory
{
   Radius 21
   Height 12
   Scale 0.7
   Inventory.Amount 1
   Inventory.MaxAmount 5
    painchance "disarm", 256
	DAMAGEFACTOR "DISARM", 1000.0
	health 500
   Inventory.PickupSound "CELLPKUP"
   Inventory.UseSound "misc/invuse"
   Inventory.PickupMessage "$GOTSENTRYBOT"
    tag"Emergency Reinforcements Device"
   Inventory.Icon TLPR
   +shootable
   +noblood
   +INVBAR
	+CANNOTPUSH
   +FLOORCLIP
   +nogravity
   States
   {
   Spawn:
      TLPR A 1
	  	TLPR A 0 A_checkproximity("bench","recombinerstatic",50)
		TLPR A 0 A_checkproximity("bench","recombinerstart",50)
		TLPR A 1 A_changeflag("NOGRAVITY", 0)
		TLPR A -1
		Stop
		
	Bench:
	TLPR A -1
	Stop


  Pain.Disarm:
  Death.Disarm:
	TNT1 A 0
	TNT1 A 0 A_Spawnitemex("scrapmetal",0,10, 15,0,1,3,random(1,5))
	TNT1 A 0 A_Spawnitemex("batterypickup",0,-10, 15,0,-1,3,random(1,5))
	TNT1 A 0 A_SpawnitEM("ELECTRONICPARTS")
    stop	
	
   Use:
	  TLPR A 0 A_Jumpifinventory("isScientist",1,3)
	  TLPR A 0 A_print("You don't have the knowledge to operate this item")
	   TLPR A 0 A_giveinventory("SentryBotTeleportBeacon",1)
	  Stop
	  TLPR A 0 A_giveinventory("numberofsentrybots",1)
      TLPR A 0 A_ThrowGrenade("SentrybotTeleporterDroppers",2,8,2,0)
      Stop
   } 
}

ACTOR SentrybotTeleporterDroppers
{
   Radius 21
   Height 56
   Scale 0.7
   +DROPOFF
   +MISSILE
   +WINDTHRUST
   +CANBOUNCEWATER
   States
   {
   Spawn:
      TLPR A 1
      Loop
   Death:
      TLPR A 1
	  TLPR A 15
	  TNT1 A 0 A_SpawnItemex("Sentrybot",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	  TNT1 A 0 A_SpawnItem("TeleportFog",0,5)
	  TLPR A 10
      Stop
   } 
}


